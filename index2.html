<!doctype html>
<html lang="bn" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ржмрж╛ржВрж▓рж╛ ржЧрж▓рзНржк рж╕рзГрж╖рзНржЯрж┐ржХрж░рзНрждрж╛</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;500;600;700&amp;family=Galada&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
    }
    
    * {
      font-family: 'Hind Siliguri', sans-serif;
    }
    
    .decorative-font {
      font-family: 'Galada', cursive;
    }
    
    .story-card {
      transition: all 0.3s ease;
      border-left: 4px solid transparent;
    }
    
    .story-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 16px rgba(0,0,0,0.1);
    }
    
    .prompt-card {
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .prompt-card:hover {
      transform: scale(1.02);
    }
    
    .category-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 0.8rem;
      font-weight: 500;
    }
    
    .fade-in {
      animation: fadeIn 0.5s ease-in;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .slide-in {
      animation: slideIn 0.4s ease-out;
    }
    
    @keyframes slideIn {
      from { opacity: 0; transform: translateX(-20px); }
      to { opacity: 1; transform: translateX(0); }
    }
    
    textarea {
      resize: vertical;
      min-height: 150px;
    }
    
    .loading-spinner {
      border: 3px solid rgba(255,255,255,0.3);
      border-radius: 50%;
      border-top: 3px solid white;
      width: 20px;
      height: 20px;
      animation: spin 1s linear infinite;
      display: inline-block;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .empty-state {
      opacity: 0.6;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full">
  <div id="app" class="h-full w-full overflow-auto"></div>
  <script>
    // Local Storage Key
    const STORAGE_KEY = 'bangla_stories_data';

    const config = {
      background_color: "#f0f4f8",
      surface_color: "#ffffff",
      text_color: "#1a202c",
      primary_action_color: "#8b5cf6",
      secondary_action_color: "#ec4899",
      font_size: 16
    };

    const prompts = [
      {
        category: "ржХрж▓рзНржкржмрж┐ржЬрзНржЮрж╛ржи",
        text: "рзирзжрзлрзж рж╕рж╛рж▓рзЗрж░ ржврж╛ржХрж╛ рж╢рж╣рж░рзЗрж░ ржПржХржЯрж┐ ржжрзГрж╢рзНржп, ржпрзЗржЦрж╛ржирзЗ рж░рж┐ржХрж╢рж╛ржЧрзБрж▓рзЛ ржЖржХрж╛рж╢рзЗ ржЙржбрж╝ржЫрзЗ ржПржмржВ ржПржХржЬржи ржЫрж╛рждрзНрж░ рждрж╛рж░ рж░рзЛржмржЯ ржмржирзНржзрзБрж░ рж╕рж╛ржерзЗ рж╕рзНржХрзБрж▓рзЗ ржпрж╛ржЪрзНржЫрзЗред",
        icon: "ЁЯЪА"
      },
      {
        category: "ржХрж▓рзНржкржмрж┐ржЬрзНржЮрж╛ржи",
        text: "ржоржЩрзНржЧрж▓ ржЧрзНрж░рж╣рзЗ ржорж╛ржирзБрж╖рзЗрж░ ржкрзНрж░ржержо ржмрж╕рждрж┐ ржПржмржВ рж╕рзЗржЦрж╛ржирзЗ ржЬржирзНржорж╛ржирзЛ ржкрзНрж░ржержо рж╢рж┐рж╢рзБржЯрж┐рж░ рж░рзЛржорж╛ржЮрзНржЪржХрж░ ржЕржнрж┐ржпрж╛ржиред",
        icon: "ЁЯММ"
      },
      {
        category: "ржХрж▓рзНржкржмрж┐ржЬрзНржЮрж╛ржи",
        text: "ржПржоржи ржПржХржЯрж┐ ржкрзГржерж┐ржмрзА ржпрзЗржЦрж╛ржирзЗ ржорж╛ржирзБрж╖ ржХржерж╛ ржирж╛ ржмрж▓рзЗ ржоржирзЗрж░ ржнрж╛ржм ржЖржжрж╛ржи-ржкрзНрж░ржжрж╛ржи ржХрж░рждрзЗ ржкрж╛рж░рзЗ, ржХрж┐ржирзНрждрзБ ржПржХржжрж┐ржи рж╣ржарж╛рзО ржПржХржЬржи ржХржерж╛ ржмрж▓рзЗ ржУржарзЗред",
        icon: "ЁЯза"
      },
      {
        category: "ржХрж▓рзНржкржмрж┐ржЬрзНржЮрж╛ржи",
        text: "ржПржХржЯрж┐ ржкрзБрж░ржирзЛ рж▓рзНржпрж╛ржкржЯржк ржпрж╛ рж╣ржарж╛рзО ржХрж░рзЗ ржнржмрж┐рж╖рзНржпрждрзЗрж░ ржЦржмрж░ ржжрж┐рждрзЗ рж╢рзБрж░рзБ ржХрж░рзЗред",
        icon: "ЁЯТ╗"
      },
      {
        category: "рж░рзВржкржХржерж╛",
        text: "рж╕рзБржирзНржжрж░ржмржирзЗрж░ ржЧржнрзАрж░рзЗ ржПржоржи ржПржХржЯрж┐ ржЧрзНрж░рж╛ржо ржпрзЗржЦрж╛ржирзЗ ржмрж╛ржШ ржПржмржВ ржорж╛ржирзБрж╖ ржПржХрзЗ ржЕржкрж░рзЗрж░ ржмржирзНржзрзБ ржПржмржВ рждрж╛рж░рж╛ ржПржХ ржЬрж╛ржжрзБржХрж░рзА рж╢ржХрзНрждрж┐рж░ ржмрж┐рж░рзБржжрзНржзрзЗ рж▓ржбрж╝ржЫрзЗред",
        icon: "ЁЯРЕ"
      },
      {
        category: "рж░рзВржкржХржерж╛",
        text: "ржорзЗржШрзЗрж░ рж░рж╛ржЬрзНржпрзЗ ржмрж╛рж╕ ржХрж░рж╛ ржПржХржЯрж┐ ржЫрзЛржЯ ржЫрзЗрж▓рзЗ, ржпрзЗ ржнрзБрж▓ ржХрж░рзЗ ржорж╛ржЯрж┐рждрзЗ ржкржбрж╝рзЗ ржпрж╛ржпрж╝ ржПржмржВ ржмрзГрж╖рзНржЯрж┐рж░ ржлрзЛржБржЯрж╛рж░ рж╕рж╛ржерзЗ ржмржирзНржзрзБрждрзНржм ржХрж░рзЗред",
        icon: "тШБя╕П"
      },
      {
        category: "рж░рзВржкржХржерж╛",
        text: "ржПржХржЯрж┐ ржЬрж╛ржжрзБржХрж░рзА рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ ржпрзЗржЦрж╛ржирзЗ ржмржЗ ржЦрзБрж▓рж▓рзЗржЗ ржкрж╛ржаржХ рж╕рзЗржЗ ржЧрж▓рзНржкрзЗрж░ ржнрзЗрждрж░рзЗ ржврзБржХрзЗ ржкржбрж╝рзЗред",
        icon: "ЁЯУЪ"
      },
      {
        category: "рж░рзВржкржХржерж╛",
        text: "рж╕ржорзБржжрзНрж░рзЗрж░ ржирж┐ржЪрзЗ ржПржХржЯрж┐ рж▓рзБржХрж╛ржирзЛ рж╢рж╣рж░, ржпрзЗржЦрж╛ржирзЗ ржорж╛ржЫрзЗрж░рж╛ ржорж╛ржирзБрж╖рзЗрж░ ржорждрзЛ ржХржерж╛ ржмрж▓рзЗ ржПржмржВ ржлрзБржЯржмрж▓ ржЦрзЗрж▓рзЗред",
        icon: "ЁЯРа"
      },
      {
        category: "рж╢рж┐ржХрзНрж╖рж╛ржорзВрж▓ржХ",
        text: "ржЯрж╛ржХрж╛рж░ ржЗрждрж┐рж╣рж╛рж╕: ржмрж┐ржирж┐ржоржпрж╝ ржкрзНрж░ржерж╛ ржерзЗржХрзЗ ржмрж┐ржЯржХржпрж╝рзЗржи ржкрж░рзНржпржирзНржд ржПржХржЯрж┐ ржорзБржжрзНрж░рж╛рж░ ржЖрждрзНржоржЬрзАржмржирзАред",
        icon: "ЁЯТ░"
      },
      {
        category: "рж╢рж┐ржХрзНрж╖рж╛ржорзВрж▓ржХ",
        text: "ржПржХржЬржи ржмрзНржпрж░рзНрже ржЙржжрзНржпрзЛржХрзНрждрж╛ ржХрзАржнрж╛ржмрзЗ ржХрзГрждрзНрж░рж┐ржо ржмрзБржжрзНржзрж┐ржорждрзНрждрж╛ ржмрж╛ ржПржЖржЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ рждрж╛рж░ ржЧрзНрж░рж╛ржоржХрзЗ ржмржжрж▓рзЗ ржжрж┐рж▓ред",
        icon: "ЁЯдЦ"
      },
      {
        category: "рж╢рж┐ржХрзНрж╖рж╛ржорзВрж▓ржХ",
        text: "рж╕ржоржпрж╝рж╛ржирзБржмрж░рзНрждрж┐рждрж╛ ржирж╛ ржорж╛ржирж╛ржпрж╝ ржПржХржЯрж┐ ржЦрж░ржЧрзЛрж╢ ржХрзАржнрж╛ржмрзЗ рждрж╛рж░ ржЬрж╛ржжрзБржХрж░рзА ржХрзНрж╖ржорждрж╛ рж╣рж╛рж░рж┐ржпрж╝рзЗ ржлрзЗрж▓рж▓ред",
        icon: "ЁЯР░"
      },
      {
        category: "рж╢рж┐ржХрзНрж╖рж╛ржорзВрж▓ржХ",
        text: "ржкрзНрж▓рж╛рж╕рзНржЯрж┐ржХ ржмрж░рзНржЬрзНржпрзЗрж░ ржмрж┐рж░рзБржжрзНржзрзЗ ржпрзБржжрзНржз ржХрж░рж╛ ржПржХржжрж▓ рж╕рж╛рж╣рж╕рзА рж╢рж┐рж╢рзБрж░ ржЧрж▓рзНржк ржпрж╛рж░рж╛ рждрж╛ржжрзЗрж░ рж╕рзНржХрзБрж▓ржХрзЗ ржЖржмрж░рзНржЬржирж╛ржорзБржХрзНржд ржХрж░рзЗред",
        icon: "тЩ╗я╕П"
      },
      {
        category: "рж░рж╣рж╕рзНржп",
        text: "рж╕рзНржХрзБрж▓рзЗрж░ ржкрзБрж░ржирзЛ рж▓рзНржпрж╛ржмрзЗ ржЦрзБржБржЬрзЗ ржкрж╛ржУржпрж╝рж╛ ржПржХржЯрж┐ ржбрж╛ржпрж╝рзЗрж░рж┐, ржпрж╛ ржкржбрж╝рж▓рзЗ ржЕржжрзНржнрзБржд рж╕ржм ржШржЯржирж╛ ржШржЯрждрзЗ ржерж╛ржХрзЗред",
        icon: "ЁЯУФ"
      },
      {
        category: "рж░рж╣рж╕рзНржп",
        text: "ржПржХржЬржи ржбрж┐ржЯрзЗржХржЯрж┐ржн ржмрж┐ржбрж╝рж╛рж▓ ржпрзЗ рждрж╛рж░ ржорж╛рж▓рж┐ржХрзЗрж░ рж╣рж╛рж░рж╛ржирзЛ ржЪрж╢ржорж╛ ржЦрзБржБржЬрждрзЗ ржЧрж┐ржпрж╝рзЗ ржПржХ ржмрж┐рж╢рж╛рж▓ рж░рж╣рж╕рзНржп рж╕ржорж╛ржзрж╛ржи ржХрж░рзЗред",
        icon: "ЁЯР▒"
      },
      {
        category: "рж░рж╣рж╕рзНржп",
        text: "ржЯрзНрж░рзЗржирзЗрж░ ржПржоржи ржПржХржЯрж┐ ржмржЧрж┐ ржпрж╛ ржпрж╛рждрзНрж░рзАржжрзЗрж░ рждрж╛ржжрзЗрж░ ржЕрждрзАрждрзЗ ржирж┐ржпрж╝рзЗ ржпрж╛ржпрж╝ред",
        icon: "ЁЯЪВ"
      },
      {
        category: "ржЖржмрзЗржЧржоржпрж╝",
        text: "ржПржХржЬржи ржмрзГржжрзНржз ржжрж╛ржжрзБ ржПржмржВ рждрж╛рж░ ржирж╛рждржирж┐, ржпрж╛рж░рж╛ ржЪрж┐ржарж┐рж░ ржорж╛ржзрзНржпржорзЗ ржПржХрзЗ ржЕржкрж░ржХрзЗ ржирж┐ржЬрзЗрж░ рждрзИрж░рж┐ ржХрж╛рж▓рзНржкржирж┐ржХ ржЬржЧржд рж╕ржорзНржкрж░рзНржХрзЗ ржЬрж╛ржирж╛ржпрж╝ред",
        icon: "ЁЯТМ"
      },
      {
        category: "ржЖржмрзЗржЧржоржпрж╝",
        text: "ржПржХржЯрж┐ рж░рзЛржмржЯ ржпрзЗ ржорж╛ржирзБрж╖рзЗрж░ ржорждрзЛ ржЖржмрзЗржЧ ржЕржирзБржнржм ржХрж░рждрзЗ ржЪрж╛ржпрж╝ ржПржмржВ ржХрж╛ржирзНржирж╛рж░ ржЕрж░рзНрже ржЦрзЛржБржЬрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзЗред",
        icon: "ЁЯдЦ"
      },
      {
        category: "ржЖржмрзЗржЧржоржпрж╝",
        text: "ржЧрзНрж░рж╛ржо ржерзЗржХрзЗ рж╢рж╣рж░рзЗ ржЖрж╕рж╛ ржПржХржЯрж┐ ржЫрзЗрж▓рзЗрж░ ржорж╛ржирж┐ржпрж╝рзЗ ржирзЗржУржпрж╝рж╛рж░ ржЧрж▓рзНржк ржПржмржВ рждрж╛рж░ ржирждрзБржи ржмржирзНржзрзБред",
        icon: "ЁЯПЩя╕П"
      },
      {
        category: "ржмрж┐ржорзВрж░рзНржд",
        text: "ржПржоржи ржПржХржЯрж┐ ржЬржЧржд ржпрзЗржЦрж╛ржирзЗ рж░ржВ ржХржерж╛ ржмрж▓рзЗ ржПржмржВ рж╢ржмрзНржж ржжрзЗржЦрж╛ ржпрж╛ржпрж╝ред",
        icon: "ЁЯОи"
      },
      {
        category: "ржмрж┐ржорзВрж░рзНржд",
        text: "ржПржХржЬржи рж╢рж┐рж▓рзНржкрзА ржпрж╛рж░ ржЖржБржХрж╛ ржЫржмрж┐ржЧрзБрж▓рзЛ рж░рж╛рждрзЗрж░ ржмрзЗрж▓рж╛ ржЬрзАржмржирзНржд рж╣ржпрж╝рзЗ ржУржарзЗред",
        icon: "ЁЯЦ╝я╕П"
      }
    ];

    let currentView = 'home';
    let stories = [];
    let editingStoryId = null;
    let currentStory = { title: '', category: '', prompt: '', story: '' };

    const categoryColors = {
      'ржХрж▓рзНржкржмрж┐ржЬрзНржЮрж╛ржи': '#3b82f6',
      'рж░рзВржкржХржерж╛': '#ec4899',
      'рж╢рж┐ржХрзНрж╖рж╛ржорзВрж▓ржХ': '#10b981',
      'рж░рж╣рж╕рзНржп': '#8b5cf6',
      'ржЖржмрзЗржЧржоржпрж╝': '#f59e0b',
      'ржмрж┐ржорзВрж░рзНржд': '#06b6d4'
    };

    // Local Storage Functions
    function loadStories() {
      try {
        const data = localStorage.getItem(STORAGE_KEY);
        return data ? JSON.parse(data) : [];
      } catch (e) {
        console.error('Failed to load stories:', e);
        return [];
      }
    }

    function saveStories(storiesData) {
      try {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(storiesData));
        return true;
      } catch (e) {
        console.error('Failed to save stories:', e);
        return false;
      }
    }

    function init() {
      stories = loadStories();
      renderHome();
    }

    function renderHome() {
      currentView = 'home';
      const baseSize = config.font_size;
      
      const app = document.getElementById('app');
      app.style.backgroundColor = config.background_color;
      
      app.innerHTML = `
        <div class="min-h-full" style="background: linear-gradient(135deg, ${config.background_color} 0%, ${adjustColor(config.background_color, -10)} 100%);">
          <div class="max-w-6xl mx-auto px-4 py-8">
            <!-- Header -->
            <header class="text-center mb-12 fade-in">
              <h1 class="decorative-font mb-2" style="font-size: ${baseSize * 3}px; color: ${config.text_color};">
                ржмрж╛ржВрж▓рж╛ ржЧрж▓рзНржк рж╕рзГрж╖рзНржЯрж┐ржХрж░рзНрждрж╛
              </h1>
              <p class="opacity-80" style="font-size: ${baseSize * 1.1}px; color: ${config.text_color};">
                ржЖржкржирж╛рж░ ржХрж▓рзНржкржирж╛ржХрзЗ ржмрж╛рж╕рзНрждржмрзЗ рж░рзВржк ржжрж┐ржи
              </p>
              <div class="mt-4 inline-flex items-center gap-2 px-4 py-2 rounded-full" style="background-color: ${config.surface_color}; font-size: ${baseSize * 0.9}px; color: ${config.text_color};">
                <span>ЁЯУ▒ ржорзЛржмрж╛ржЗрж▓ рж╕рзНржЯрзЛрж░рзЗржЬ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржЫрзЗ</span>
              </div>
            </header>

            <!-- Action Buttons -->
            <div class="grid md:grid-cols-3 gap-6 mb-12">
              <button onclick="showCreateStory()" class="p-8 rounded-2xl shadow-lg hover:shadow-xl transition-all transform hover:scale-105 slide-in" style="background-color: ${config.surface_color}; border-left: 6px solid ${config.primary_action_color};">
                <div style="font-size: ${baseSize * 3}px; margin-bottom: 12px;">тЬНя╕П</div>
                <h3 style="font-size: ${baseSize * 1.3}px; font-weight: 600; margin-bottom: 8px; color: ${config.text_color};">
                  ржирждрзБржи ржЧрж▓рзНржк рж▓рж┐ржЦрзБржи
                </h3>
                <p style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}; opacity: 0.7;">
                  ржЖржкржирж╛рж░ ржирж┐ржЬрж╕рзНржм ржЧрж▓рзНржк рждрзИрж░рж┐ ржХрж░рзБржи
                </p>
              </button>

              <button onclick="showPrompts()" class="p-8 rounded-2xl shadow-lg hover:shadow-xl transition-all transform hover:scale-105 slide-in" style="background-color: ${config.surface_color}; border-left: 6px solid ${config.secondary_action_color}; animation-delay: 0.1s;">
                <div style="font-size: ${baseSize * 3}px; margin-bottom: 12px;">ЁЯТб</div>
                <h3 style="font-size: ${baseSize * 1.3}px; font-weight: 600; margin-bottom: 8px; color: ${config.text_color};">
                  рж╕рзГржЬржирж╢рзАрж▓ ржкрзНрж░ржорзНржкржЯ
                </h3>
                <p style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}; opacity: 0.7;">
                  рзирзжржЯрж┐ ржЕржирзБржкрзНрж░рзЗрж░ржгрж╛ржорзВрж▓ржХ ржЖржЗржбрж┐ржпрж╝рж╛
                </p>
              </button>

              <button onclick="showSavedStories()" class="p-8 rounded-2xl shadow-lg hover:shadow-xl transition-all transform hover:scale-105 slide-in" style="background-color: ${config.surface_color}; border-left: 6px solid ${config.primary_action_color}; animation-delay: 0.2s;">
                <div style="font-size: ${baseSize * 3}px; margin-bottom: 12px;">ЁЯУЪ</div>
                <h3 style="font-size: ${baseSize * 1.3}px; font-weight: 600; margin-bottom: 8px; color: ${config.text_color};">
                  рж╕ржВрж░ржХрзНрж╖рж┐ржд ржЧрж▓рзНржк
                </h3>
                <p style="font-size: ${baseSize * 0.9}px; color: ${config.text_color}; opacity: 0.7;">
                  ржЖржкржирж╛рж░ рж▓рзЗржЦрж╛ ржЧрж▓рзНржкржЧрзБрж▓рзЛ ржжрзЗржЦрзБржи (${stories.length})
                </p>
              </button>
            </div>

            <!-- Features -->
            <div class="grid md:grid-cols-2 gap-6">
              <div class="p-6 rounded-xl fade-in" style="background-color: ${config.surface_color}; animation-delay: 0.3s;">
                <h4 style="font-size: ${baseSize * 1.2}px; font-weight: 600; margin-bottom: 12px; color: ${config.text_color};">
                  ЁЯОп ржЕрзНржпрж╛ржкрзЗрж░ ржмрзИрж╢рж┐рж╖рзНржЯрзНржп
                </h4>
                <ul style="font-size: ${baseSize}px; color: ${config.text_color}; opacity: 0.8; line-height: 1.8;">
                  <li>тЬУ рзирзжржЯрж┐ ржмрж┐ржнрж┐ржирзНржи ржХрзНржпрж╛ржЯрж╛ржЧрж░рж┐рж░ ржкрзНрж░ржорзНржкржЯ</li>
                  <li>тЬУ рж╕рзАржорж╛рж╣рзАржи ржЧрж▓рзНржк рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзБржи</li>
                  <li>тЬУ ржЧрж▓рзНржк рж╕ржорзНржкрж╛ржжржирж╛ ржУ ржорзБржЫрзЗ ржлрзЗрж▓рзБржи</li>
                  <li>тЬУ ржорзЛржмрж╛ржЗрж▓ рж╕рзНржЯрзЛрж░рзЗржЬрзЗ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ рж╕ржВрж░ржХрзНрж╖ржг</li>
                </ul>
              </div>

              <div class="p-6 rounded-xl fade-in" style="background-color: ${config.surface_color}; animation-delay: 0.4s;">
                <h4 style="font-size: ${baseSize * 1.2}px; font-weight: 600; margin-bottom: 12px; color: ${config.text_color};">
                  ЁЯУЭ рж▓рзЗржЦрж╛рж░ ржЯрж┐ржкрж╕
                </h4>
                <ul style="font-size: ${baseSize}px; color: ${config.text_color}; opacity: 0.8; line-height: 1.8;">
                  <li>тЬУ ржкрзНрж░ржорзНржкржЯ ржерзЗржХрзЗ ржЕржирзБржкрзНрж░рзЗрж░ржгрж╛ ржирж┐ржи</li>
                  <li>тЬУ ржЪрж░рж┐рждрзНрж░ржХрзЗ ржЬрзАржмржирзНржд ржХрж░рзБржи</li>
                  <li>тЬУ ржЯрзБржЗрж╕рзНржЯ ржпрзЛржЧ ржХрж░рзБржи</li>
                  <li>тЬУ ржЖржмрзЗржЧрзЗрж░ ржЫрзЛржБржпрж╝рж╛ ржжрж┐ржи</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      `;
    }

    function showPrompts() {
      currentView = 'prompts';
      const baseSize = config.font_size;
      
      const app = document.getElementById('app');
      app.style.backgroundColor = config.background_color;
      
      app.innerHTML = `
        <div class="min-h-full" style="background: linear-gradient(135deg, ${config.background_color} 0%, ${adjustColor(config.background_color, -10)} 100%);">
          <div class="max-w-6xl mx-auto px-4 py-8">
            <div class="flex items-center justify-between mb-8">
              <button onclick="renderHome()" class="px-4 py-2 rounded-lg font-medium transition-colors" style="background-color: ${config.surface_color}; color: ${config.text_color}; font-size: ${baseSize}px;">
                тЖР рж╣рзЛржорзЗ ржлрж┐рж░рзБржи
              </button>
              <h2 class="decorative-font" style="font-size: ${baseSize * 2}px; color: ${config.text_color};">
                рж╕рзГржЬржирж╢рзАрж▓ ржкрзНрж░ржорзНржкржЯ ЁЯТб
              </h2>
              <button onclick="showRandomPrompt()" class="px-4 py-2 rounded-lg font-medium transition-all" style="background-color: ${config.secondary_action_color}; color: white; font-size: ${baseSize}px;">
                ЁЯО▓ рж░тАНрзНржпрж╛ржирзНржбржо
              </button>
            </div>

            <div class="grid md:grid-cols-2 gap-6" id="prompts-container">
              ${prompts.map((prompt, index) => `
                <div class="prompt-card p-6 rounded-xl shadow-lg fade-in" style="background-color: ${config.surface_color}; animation-delay: ${index * 0.05}s; border-left: 4px solid ${categoryColors[prompt.category]};" onclick="usePrompt(${index})">
                  <div class="flex items-start gap-4">
                    <div style="font-size: ${baseSize * 2.5}px;">${prompt.icon}</div>
                    <div class="flex-1">
                      <span class="category-badge mb-2" style="background-color: ${categoryColors[prompt.category]}20; color: ${categoryColors[prompt.category]}; font-size: ${baseSize * 0.8}px;">
                        ${prompt.category}
                      </span>
                      <p style="font-size: ${baseSize}px; line-height: 1.6; color: ${config.text_color};">
                        ${prompt.text}
                      </p>
                    </div>
                  </div>
                </div>
              `).join('')}
            </div>
          </div>
        </div>
      `;
    }

    function showRandomPrompt() {
      const randomIndex = Math.floor(Math.random() * prompts.length);
      usePrompt(randomIndex);
    }

    function usePrompt(index) {
      const prompt = prompts[index];
      currentStory = {
        title: '',
        category: prompt.category,
        prompt: prompt.text,
        story: ''
      };
      showCreateStory();
    }

    function showCreateStory() {
      currentView = 'create';
      const baseSize = config.font_size;
      
      const app = document.getElementById('app');
      app.style.backgroundColor = config.background_color;
      
      const isEditing = editingStoryId !== null;
      let story = currentStory;
      
      if (isEditing) {
        story = stories.find(s => s.id === editingStoryId) || currentStory;
      }
      
      app.innerHTML = `
        <div class="min-h-full" style="background: linear-gradient(135deg, ${config.background_color} 0%, ${adjustColor(config.background_color, -10)} 100%);">
          <div class="max-w-4xl mx-auto px-4 py-8">
            <div class="flex items-center justify-between mb-8">
              <button onclick="${isEditing ? 'showSavedStories()' : 'renderHome()'}" class="px-4 py-2 rounded-lg font-medium transition-colors" style="background-color: ${config.surface_color}; color: ${config.text_color}; font-size: ${baseSize}px;">
                тЖР ржлрж┐рж░рзЗ ржпрж╛ржи
              </button>
              <h2 class="decorative-font" style="font-size: ${baseSize * 2}px; color: ${config.text_color};">
                ${isEditing ? 'ржЧрж▓рзНржк рж╕ржорзНржкрж╛ржжржирж╛ ржХрж░рзБржи' : 'ржирждрзБржи ржЧрж▓рзНржк рж▓рж┐ржЦрзБржи'} тЬНя╕П
              </h2>
              <div style="width: 120px;"></div>
            </div>

            <form onsubmit="saveStory(event)" class="space-y-6 fade-in">
              <div class="p-8 rounded-2xl shadow-lg" style="background-color: ${config.surface_color};">
                
                <div class="mb-6">
                  <label for="story-title" class="block mb-2 font-medium" style="font-size: ${baseSize * 1.1}px; color: ${config.text_color};">
                    ржЧрж▓рзНржкрзЗрж░ рж╢рж┐рж░рзЛржирж╛ржо *
                  </label>
                  <input 
                    type="text" 
                    id="story-title" 
                    required
                    value="${story.title || ''}"
                    placeholder="ржПржХржЯрж┐ ржЖржХрж░рзНрж╖ржгрзАржпрж╝ рж╢рж┐рж░рзЛржирж╛ржо ржжрж┐ржи"
                    class="w-full px-4 py-3 rounded-lg border-2 focus:outline-none focus:ring-2 transition-all"
                    style="font-size: ${baseSize}px; border-color: ${config.background_color}; color: ${config.text_color};"
                  >
                </div>

                <div class="mb-6">
                  <label for="story-category" class="block mb-2 font-medium" style="font-size: ${baseSize * 1.1}px; color: ${config.text_color};">
                    ржХрзНржпрж╛ржЯрж╛ржЧрж░рж┐ *
                  </label>
                  <select 
                    id="story-category" 
                    required
                    class="w-full px-4 py-3 rounded-lg border-2 focus:outline-none focus:ring-2 transition-all"
                    style="font-size: ${baseSize}px; border-color: ${config.background_color}; color: ${config.text_color};"
                  >
                    <option value="">ржХрзНржпрж╛ржЯрж╛ржЧрж░рж┐ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи</option>
                    ${Object.keys(categoryColors).map(cat => `
                      <option value="${cat}" ${story.category === cat ? 'selected' : ''}>${cat}</option>
                    `).join('')}
                  </select>
                </div>

                ${story.prompt ? `
                <div class="mb-6 p-4 rounded-lg" style="background-color: ${config.background_color};">
                  <label class="block mb-2 font-medium" style="font-size: ${baseSize * 1.1}px; color: ${config.text_color};">
                    ржкрзНрж░ржорзНржкржЯ (ржЕржирзБржкрзНрж░рзЗрж░ржгрж╛)
                  </label>
                  <p style="font-size: ${baseSize * 0.95}px; line-height: 1.6; color: ${config.text_color}; opacity: 0.8;">
                    ${story.prompt}
                  </p>
                </div>
                ` : ''}

                <div class="mb-6">
                  <label for="story-content" class="block mb-2 font-medium" style="font-size: ${baseSize * 1.1}px; color: ${config.text_color};">
                    ржЧрж▓рзНржк рж▓рж┐ржЦрзБржи *
                  </label>
                  <textarea 
                    id="story-content" 
                    required
                    placeholder="ржПржЦрж╛ржирзЗ ржЖржкржирж╛рж░ рж╕рзГржЬржирж╢рзАрж▓ ржЧрж▓рзНржк рж▓рж┐ржЦрзБржи..."
                    class="w-full px-4 py-3 rounded-lg border-2 focus:outline-none focus:ring-2 transition-all"
                    style="font-size: ${baseSize}px; min-height: 300px; border-color: ${config.background_color}; color: ${config.text_color}; line-height: 1.8;"
                  >${story.story || ''}</textarea>
                  <p style="font-size: ${baseSize * 0.85}px; color: ${config.text_color}; opacity: 0.6; margin-top: 8px;">
                    рж╢ржмрзНржж рж╕ржВржЦрзНржпрж╛: <span id="word-count">0</span>
                  </p>
                </div>

                <div class="flex gap-4">
                  <button 
                    type="submit" 
                    id="save-btn"
                    class="flex-1 px-6 py-3 rounded-lg font-medium transition-all transform hover:scale-105"
                    style="background-color: ${config.primary_action_color}; color: white; font-size: ${baseSize * 1.1}px;"
                  >
                    ${isEditing ? 'тЬУ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзБржи' : 'ЁЯТ╛ ржЧрж▓рзНржк рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзБржи'}
                  </button>
                  ${isEditing ? `
                  <button 
                    type="button"
                    onclick="deleteStory('${story.id}')"
                    id="delete-btn"
                    class="px-6 py-3 rounded-lg font-medium transition-all"
                    style="background-color: #ef4444; color: white; font-size: ${baseSize * 1.1}px;"
                  >
                    ЁЯЧСя╕П ржорзБржЫрзБржи
                  </button>
                  ` : ''}
                </div>
              </div>
            </form>
          </div>
        </div>
      `;

      // Word counter
      const textarea = document.getElementById('story-content');
      const wordCount = document.getElementById('word-count');
      
      function updateWordCount() {
        const text = textarea.value.trim();
        const words = text ? text.split(/\s+/).length : 0;
        wordCount.textContent = words;
      }
      
      textarea.addEventListener('input', updateWordCount);
      updateWordCount();
    }

    function saveStory(event) {
      event.preventDefault();
      
      const saveBtn = document.getElementById('save-btn');
      const originalText = saveBtn.innerHTML;
      saveBtn.disabled = true;
      saveBtn.innerHTML = '<div class="loading-spinner mx-auto"></div>';

      const title = document.getElementById('story-title').value;
      const category = document.getElementById('story-category').value;
      const storyContent = document.getElementById('story-content').value;

      const storyData = {
        id: editingStoryId || Date.now().toString(),
        title: title,
        category: category,
        prompt: currentStory.prompt || '',
        story: storyContent,
        createdAt: editingStoryId ? (stories.find(s => s.id === editingStoryId).createdAt) : new Date().toISOString(),
        updatedAt: new Date().toISOString()
      };

      if (editingStoryId) {
        // Update existing story
        stories = stories.map(s => s.id === editingStoryId ? storyData : s);
      } else {
        // Add new story
        stories.push(storyData);
      }

      const success = saveStories(stories);

      saveBtn.disabled = false;
      saveBtn.innerHTML = originalText;

      if (success) {
        showToast(editingStoryId ? 'тЬУ ржЧрж▓рзНржк ржЖржкржбрзЗржЯ рж╣ржпрж╝рзЗржЫрзЗ!' : 'тЬУ ржЧрж▓рзНржк рж╕ржВрж░ржХрзНрж╖рж┐ржд рж╣ржпрж╝рзЗржЫрзЗ!', 'success');
        editingStoryId = null;
        currentStory = { title: '', category: '', prompt: '', story: '' };
        setTimeout(() => showSavedStories(), 1000);
      } else {
        showToast('тЭМ рж╕ржВрж░ржХрзНрж╖ржгрзЗ рж╕ржорж╕рзНржпрж╛ рж╣ржпрж╝рзЗржЫрзЗред ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржиред', 'error');
      }
    }

    function deleteStory(storyId) {
      const deleteBtn = document.getElementById('delete-btn');
      const saveBtn = document.getElementById('save-btn');
      
      if (deleteBtn.textContent.includes('ржирж┐рж╢рзНржЪрж┐ржд')) {
        deleteBtn.disabled = true;
        saveBtn.disabled = true;
        deleteBtn.innerHTML = '<div class="loading-spinner mx-auto"></div>';
        
        stories = stories.filter(s => s.id !== storyId);
        const success = saveStories(stories);
        
        if (success) {
          showToast('тЬУ ржЧрж▓рзНржк ржорзБржЫрзЗ ржлрзЗрж▓рж╛ рж╣ржпрж╝рзЗржЫрзЗ', 'success');
          editingStoryId = null;
          setTimeout(() => showSavedStories(), 800);
        } else {
          showToast('тЭМ ржорзБржЫрждрзЗ рж╕ржорж╕рзНржпрж╛ рж╣ржпрж╝рзЗржЫрзЗ', 'error');
          deleteBtn.disabled = false;
          saveBtn.disabled = false;
          deleteBtn.textContent = 'ЁЯЧСя╕П ржорзБржЫрзБржи';
        }
      } else {
        deleteBtn.textContent = 'тЬУ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзБржи?';
        deleteBtn.style.backgroundColor = '#dc2626';
        setTimeout(() => {
          if (deleteBtn) {
            deleteBtn.textContent = 'ЁЯЧСя╕П ржорзБржЫрзБржи';
            deleteBtn.style.backgroundColor = '#ef4444';
          }
        }, 3000);
      }
    }

    function showSavedStories() {
      currentView = 'saved';
      renderSavedStories();
    }

    function renderSavedStories() {
      const baseSize = config.font_size;
      
      const app = document.getElementById('app');
      app.style.backgroundColor = config.background_color;
      
      app.innerHTML = `
        <div class="min-h-full" style="background: linear-gradient(135deg, ${config.background_color} 0%, ${adjustColor(config.background_color, -10)} 100%);">
          <div class="max-w-6xl mx-auto px-4 py-8">
            <div class="flex items-center justify-between mb-8">
              <button onclick="renderHome()" class="px-4 py-2 rounded-lg font-medium transition-colors" style="background-color: ${config.surface_color}; color: ${config.text_color}; font-size: ${baseSize}px;">
                тЖР рж╣рзЛржорзЗ ржлрж┐рж░рзБржи
              </button>
              <h2 class="decorative-font" style="font-size: ${baseSize * 2}px; color: ${config.text_color};">
                рж╕ржВрж░ржХрзНрж╖рж┐ржд ржЧрж▓рзНржк ЁЯУЪ
              </h2>
              <div class="px-4 py-2 rounded-lg" style="background-color: ${config.surface_color}; font-size: ${baseSize}px; color: ${config.text_color};">
                ржорзЛржЯ: ${stories.length}
              </div>
            </div>

            ${stories.length === 0 ? `
              <div class="text-center py-20 empty-state">
                <div style="font-size: ${baseSize * 4}px; margin-bottom: 16px;">ЁЯУЭ</div>
                <h3 style="font-size: ${baseSize * 1.5}px; margin-bottom: 12px; color: ${config.text_color};">
                  ржПржЦржирзЛ ржХрзЛржирзЛ ржЧрж▓рзНржк ржирзЗржЗ
                </h3>
                <p style="font-size: ${baseSize}px; margin-bottom: 24px; color: ${config.text_color};">
                  ржЖржкржирж╛рж░ ржкрзНрж░ржержо ржЧрж▓рзНржк рж▓рж┐ржЦрзЗ рж╢рзБрж░рзБ ржХрж░рзБржи!
                </p>
                <button onclick="showCreateStory()" class="px-6 py-3 rounded-lg font-medium transition-all transform hover:scale-105" style="background-color: ${config.primary_action_color}; color: white; font-size: ${baseSize * 1.1}px;">
                  ржирждрзБржи ржЧрж▓рзНржк рж▓рж┐ржЦрзБржи
                </button>
              </div>
            ` : `
              <div class="grid md:grid-cols-2 gap-6">
                ${stories.map((story, index) => `
                  <div class="story-card p-6 rounded-xl shadow-lg cursor-pointer fade-in" 
                       style="background-color: ${config.surface_color}; border-left-color: ${categoryColors[story.category]}; animation-delay: ${index * 0.05}s;"
                       onclick="editStoryById('${story.id}')">
                    <div class="flex items-start justify-between mb-3">
                      <span class="category-badge" style="background-color: ${categoryColors[story.category]}20; color: ${categoryColors[story.category]}; font-size: ${baseSize * 0.8}px;">
                        ${story.category}
                      </span>
                      <span style="font-size: ${baseSize * 0.8}px; color: ${config.text_color}; opacity: 0.6;">
                        ${formatDate(story.createdAt)}
                      </span>
                    </div>
                    <h3 style="font-size: ${baseSize * 1.3}px; font-weight: 600; margin-bottom: 8px; color: ${config.text_color};">
                      ${story.title}
                    </h3>
                    <p style="font-size: ${baseSize * 0.9}px; line-height: 1.6; color: ${config.text_color}; opacity: 0.7;">
                      ${story.story.substring(0, 150)}${story.story.length > 150 ? '...' : ''}
                    </p>
                  </div>
                `).join('')}
              </div>
            `}
          </div>
        </div>
      `;
    }

    function editStoryById(storyId) {
      editingStoryId = storyId;
      showCreateStory();
    }

    function formatDate(dateString) {
      const date = new Date(dateString);
      const now = new Date();
      const diffMs = now - date;
      const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));
      
      if (diffDays === 0) return 'ржЖржЬ';
      if (diffDays === 1) return 'ржЧрждржХрж╛рж▓';
      if (diffDays < 7) return `${diffDays} ржжрж┐ржи ржЖржЧрзЗ`;
      
      return date.toLocaleDateString('bn-BD', { 
        year: 'numeric', 
        month: 'short', 
        day: 'numeric' 
      });
    }

    function adjustColor(hex, percent) {
      const num = parseInt(hex.replace('#', ''), 16);
      const amt = Math.round(2.55 * percent);
      const R = (num >> 16) + amt;
      const G = (num >> 8 & 0x00FF) + amt;
      const B = (num & 0x0000FF) + amt;
      return '#' + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 +
        (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 +
        (B < 255 ? B < 1 ? 0 : B : 255))
        .toString(16).slice(1);
    }

    function showToast(message, type) {
      const baseSize = config.font_size;
      const toast = document.createElement('div');
      toast.className = 'fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg z-50 fade-in';
      toast.style.backgroundColor = type === 'success' ? '#10b981' : '#ef4444';
      toast.style.color = 'white';
      toast.style.fontSize = `${baseSize}px`;
      toast.textContent = message;
      document.body.appendChild(toast);
      setTimeout(() => toast.remove(), 3000);
    }

    init();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c7c624a503eba55',t:'MTc3MDA2MzU3MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
